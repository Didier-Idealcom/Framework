"use strict";var MyListDatatable=function(){var t,e,n,a,o,l=()=>{t.querySelectorAll('[data-kt-table-filter="delete_row"]').forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();const n=t.target.closest("tr");Swal.fire({text:"Are you sure you want to delete this record ?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, delete !",cancelButtonText:"No, cancel",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then((function(t){t.value?Swal.fire({text:"Successful deletion !",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it !",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then((function(){e.row($(n)).remove().draw()})).then((function(){r()})):"cancel"===t.dismiss&&Swal.fire({text:"Deletion error",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it !",customClass:{confirmButton:"btn fw-bold btn-primary"}})}))}))}))},c=()=>{const l=t.querySelectorAll('[type="checkbox"]');n=document.querySelector('[data-kt-table-toolbar="base"]'),a=document.querySelector('[data-kt-table-toolbar="selected"]'),o=document.querySelector('[data-kt-table-select="selected_count"]');const i=document.querySelector('[data-kt-table-select="delete_selected"]');l.forEach((t=>{t.addEventListener("click",(function(){setTimeout((function(){r()}),50)}))})),i.addEventListener("click",(function(){Swal.fire({text:"Are you sure you want to delete selected records ?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, delete !",cancelButtonText:"No, cancel",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then((function(n){n.value?Swal.fire({text:"Successful deletion !",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then((function(){l.forEach((t=>{t.checked&&e.row($(t.closest("tbody tr"))).remove().draw()}));t.querySelectorAll('[type="checkbox"]')[0].checked=!1})).then((function(){r(),c()})):"cancel"===n.dismiss&&Swal.fire({text:"Deletion error",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it !",customClass:{confirmButton:"btn fw-bold btn-primary"}})}))}))};const r=()=>{const e=t.querySelectorAll('tbody [type="checkbox"]');let l=!1,c=0;e.forEach((t=>{t.checked&&(l=!0,c++)})),l?(o.innerHTML=c,n.classList.add("d-none"),a.classList.remove("d-none")):(n.classList.remove("d-none"),a.classList.add("d-none"))};return{init:function(n,a,o){!function(n,a,o){t=document.querySelector(n),e=$(t).DataTable({serverSide:!0,pageLength:10,ajax:{url:a,type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},ordering:!0,order:[[1,"asc"]],paging:!0,columns:o,autoWidth:!1}),$(".dataTable").on("click",".trigger_row_details",(function(){var t=$(this).closest("tr"),n=e.row(t);n.child.isShown()?(n.child.hide(),t.removeClass("shown")):(n.child(n.data().row_details).show(),t.addClass("shown")),$(this).toggleClass("active")})),e.on("init",(function(){e.settings().init().columns.forEach((function(t){if(!0===t.customFilter){var n=e.column(t.name+":name"),a=$('<div class="mb-10"><label class="form-label fs-6 fw-bold">'+t.title+' :</label><select class="form-select form-select-solid fw-bolder" data-kt-select2="true" data-placeholder="Select option" data-allow-clear="true" data-kt-table-filter="'+t.name+'" data-hide-search="true"><option value=""></option></select></div>');a.prependTo($('[data-kt-table-filter="form"]')),a.find("select").on("change",(function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());!0===t.customFilterSmart?n.search(e||"").draw():n.search(e?"^"+e+"$":"",!0,!1).draw()}));var o=n.data().unique().sort();o=o.each((function(t,e){-1!==t.indexOf(",")&&t.split(", ").forEach((function(t){o.push(t)}))})).filter((function(t,e){return""!==t&&-1===t.indexOf(",")})).unique().sort().each((function(t,e){a.find("select").append('<option value="'+t+'">'+t+"</option>")}))}})),KTComponents.init(),e.table().header().classList="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0",e.table().body().classList="text-gray-600 fw-bold"})),e.on("draw",(function(){c(),l(),r()}))}(n,a,o),c(),(()=>{const t=document.querySelector('[data-kt-table-filter="search"]');t&&t.addEventListener("keyup",(function(t){e.search(t.target.value).draw()}))})(),(()=>{const t=document.querySelector('[data-kt-table-filter="reset"]');t&&t.addEventListener("click",(function(){document.querySelector('[data-kt-table-filter="form"]').querySelectorAll("select").forEach((t=>{$(t).val("").trigger("change")})),e.search("").draw()}))})(),l()}}}(),MyScriptGeneral={init:function(){$(".card-body").on("click",".toggle-active",(function(t){var e=$(this);$.ajax({method:"GET",url:$(this).data("url"),success:function(t,n,a){if(e.data("reload"))datatable.reload();else{var o=e.data("label-on"),l=e.data("label-off");e.hasClass("btn-light-success")?e.html(e.html().replace(o,l)):e.html(e.html().replace(l,o)),e.toggleClass("btn-light-success btn-light-danger"),e.find("i").toggleClass("la-toggle-on la-toggle-off"),e.blur()}},error:function(t,e,n){console.log("Status "+e+" : "+n)}})})),$(".my-link__save").on("click",(function(t){t.preventDefault(),$($(this).attr("href")).trigger("click")})),$(".input-multilangue").not(".lang-fr").parents(".field-wrapper").hide(),$('.lang-change[data-lang="fr"]').addClass("active"),$(".lang-change").on("click",(function(t){if(t.preventDefault(),!$(this).hasClass("active")){var e=$(this).data("lang");$(".input-multilangue").parents(".field-wrapper").hide(),$(".input-multilangue.lang-"+e).parents(".field-wrapper").fadeIn(),$(".lang-change").removeClass("active"),$('.lang-change[data-lang="'+e+'"]').addClass("active")}}))}};jQuery(document).ready((function(){MyScriptGeneral.init(),$(".open_visual_editor").on("click",(function(t){t.preventDefault(),$(this).prev("visual-editor").removeAttr("hidden")})),$("visual-editor").on("close",(function(t){$(this).attr("hidden","hidden")}))}));